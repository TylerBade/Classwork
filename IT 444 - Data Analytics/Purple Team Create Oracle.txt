DROP TABLE FINANCIAL_INSTITUTION;
DROP TABLE SALES;
DROP TABLE LEASE;
DROP TABLE RECEIPT;
DROP TABLE PAYMENT_METHOD;


CREATE TABLE FINANCIAL_INSTITUTION
(INSTITUTE_ID NUMBER(4,0) NOT NULL,
 NAME VARCHAR2(30) NOT NULL,
 STREET_ADDR VARCHAR2(100),
 CITY  VARCHAR2(20),
 STATE VARCHAR2(2),
 CONSTRAINT INSTITUTE_PK PRIMARY KEY (INSTITUTE_ID)
);


CREATE TABLE SALES
( PURCHASE_NO NUMBER(4,0) NOT NULL,
  PROPERTY_NO VARCHAR2(5) NOT NULL,
  CLIENT_NO NUMBER(4,0) NOT NULL,
  PRICE NUMBER(8,2),
  SALE_DATE DATE,
  INSTITUTE_ID NUMBER(4,0) NOT NULL,
  STAFF_NO NUMBER(4,0) NOT NULL,
  START_DATE DATE NOT NULL,
  APPROVAL_DATE DATE NOT NULL,
  FINAL_TRANSACTION_DATE DATE NOT NULL,
  CONSTRAINT SALES_PK PRIMARY KEY (PURCHASE_NO),
  CONSTRAINT FK_PROPNO FOREIGN KEY PROPERTY_NO REFERENCES PROPERTY(PROPERTY_NO),
  CONSTRAINT FK_CLIENTNO FOREIGN KEY CLIENT_NO REFERENCES CLIENT(CLIENT_NO),
  CONSTRAINT FK_INSTID FOREIGN KEY INSTITUTE_ID REFERENCES FINANCIAL_INSTITUTION(INSTITUTE_ID),
  CONSTRAINT FK_STAFFNO FOREIGN KEY STAFF_NO REFERENCES STAFF(STAFF_NO)
);

CREATE TABLE LEASE
( LEASE_NO NUMBER(6,0) NOT NULL,
  PROPERTY_NO VARCHAR2(5) NOT NULL,
  CLIENT_NO NUMBER(4,0) NOT NULL,
  LEASE_START DATE NOT NULL,
  LEASE_END DATE NOT NULL,
  RENT NUMBER(6,2) NOT NULL,  
  DEPOSIT NUMBER(6,2) NOT NULL,
  CONSTRAINT LEASE_PK PRIMARY KEY (LEASE_NO), 
  CONSTRAINT FK_PROPNO FOREIGN KEY PROPERTY_NO REFERENCES PROPERTY(PROPERTY_NO),
  CONSTRAINT FK_CLIENTNO FOREIGN KEY CLIENT_NO REFERENCES CLIENT(CLIENT_NO)
);

CREATE TABLE RECEIPT
(
  RECEIPT_NO NUMBER(8,0) NOT NULL,
  PAY_DATE DATE,
  LEASE_NO NUMBER(6,0) NOT NULL,
  PAYMENT_TYPE_NO NUMBER(2,0) NOT NULL,
  CONSTRAINT RECEIPT_PK PRIMARY KEY (RECEIPT_NO)
  CONSTRAINT FK_LEASE FOREIGN KEY LEASE_NO REFERENCES LEASE(LEASE_NO),
  CONSTRAINT FK_PAYTYPE FOREIGN KEY PAYMENT_TYPE_NO REFERENCES PAYMENT_METHOD(PAYMENT_TYPE_NO)
);

CREATE TABLE PAYMENT_METHOD
(
  PAYMENT_TYPE_NO NUMBER(2) NOT NULL,
  PAYMENT_TYPE_DESC VARCHAR2(50),
  CONSTRAINT PK_PAYMETH PRIMARY KEY (PAYMENT_TYPE_NO)
);